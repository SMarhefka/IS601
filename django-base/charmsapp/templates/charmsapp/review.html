{# charmsapp/templates/charmsapp/review.html #}
{% extends 'charmsapp/base.html' %}
{#<!--{% load render_table from django_tables2 %}-->#}

{% block head_css_section %}
{#<!-- Add the DataTables CSS (just for review.html) -->#}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css" />
{% endblock head_css_section %}

{% block title %}
CHARMS REVIEW
{% endblock %}

{% block side_navigation %}
<a href={% url 'charmsapp:index_view' %}>Home</a>
<a href={% url 'charmsapp:upload_view' %}>Upload</a>
{% endblock side_navigation %}

{% block main_content %}
<h1>DATA REVIEW</h1>
<hr />
{#<!--{% render_table test_data %}-->#}
<div>
    <p>Min Number: <span><input type="text" id="min" name="min"></span></p>
    <p>Max Number: <span><input type="text" id="max" name="max"></span></p>
</div>
<div></div>
<table class="table table-sm" id="example">
    <thead>
        <tr>
            <th scope="col">ID</th>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">E-mail</th>
            <th scope="col">Favorite Number</th>
            <th scope="col">Date</th>
            <th scope="col">Action</th>
        </tr>
    </thead>
    <tbody>
        {% for data in test_data %}
        <tr>
            <td scope="row"> {{ data.id }}</td>
            <td scope="row" contenteditable="true"> {{ data.first_name }} </td>
            <td scope="row" contenteditable="true"> {{ data.last_name }} </td>
            <td scope="row" contenteditable="true"> {{ data.email }} </td>
            <td scope="row" contenteditable="true"> {{ data.fav_number }} </td>
            <td scope="row" contenteditable="true"> {{ data.sample_date }} </td>
            <td scope="row"> Edit </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock main_content %}

{% block footer_javascript_section %}
<script src="http://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script type="text/javascript">
    $.fn.dataTable.ext.search.push(
        function (settings, data, dataIndex) {
            var min = parseInt($('#min').val(), 10);
            var max = parseInt($('#max').val(), 10);
            var age = parseFloat(data[4]) || 0; // use data for the age column

            if ((isNaN(min) && isNaN(max)) ||
                (isNaN(min) && age <= max) ||
                (min <= age && isNaN(max)) ||
                (min <= age && age <= max)) {
                return true;
            }
            return false;
        }
    );

    $(document).ready(function () {
        var table = $('#example').DataTable();

        // Event listener to the two range filtering inputs to redraw on input
        $('#min, #max').keyup(function () {
            table.draw();
        });
    });
</script>
{% endblock footer_javascript_section %}